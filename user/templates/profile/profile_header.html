<div class="p-5 mb-4 bg-light rounded-3">
  <div class="container-fluid py-5">
    <div class="row">
      <div class="col-md-6">
        <div id="username-header" style="display: none;">{{ user_data.user_name }}</div>
        <h2 class="" >{{ user_data.user_name }}<span class="mx-3">
          {% if request.user.username == user_data.user_name %}
          <a class="btn btn-outline-secondary text-dark" href="/accounts/edit/">edit profile</a>
          {% else %}

            <a class="btn btn-outline-secondary text-dark" href="/chat-to/{{user_data.user_name}}">message</a>
            
            <button class="btn btn-primary" id="follow" >
              
            {% if followers.2 %}
            Following
              {% else %}
              Follow
              {% endif %}
            </button>
        
          {% endif %}
        </span></h2>
        <div class="row my-4 mb-4">
          <div class="col-md-3">
            <p class="fw-bold">{{post_data.count}} posts</p>
          </div>
          <div class="col-md-4">
            <p class="fw-bold" id="followers">{{followers.0.count}} Followers</p>
          </div>
          <div class="col-md-4">
            <p class="fw-bold" id="following">{{followers.1.count}} Following</p>
          </div>
        </div>
        <p class="col-md-8 fs-5 user-full-name fw-bold">{{ user_data.name }}</p>
        <p class="col-md-8 fs-6 description">{{ user_data.user_desc }}</p>
      </div>
      <div class="col-md-2"></div>
      <div class="col-md-4 mr-2">
        <img src="/media/{{ searchedUserPic }}" class="img-container" width="200px" height="200px" id="Profilephoto" style="object-fit: cover; border-radius: 50%;" alt="" />
      </div>
    </div>
  </div>
</div>
<script src="/static/utils/ajax_req.js" type="text/javascript"></script>
<script>
  $("#follow").click(function(e) {
    console.log("Follow");
    var follow = document.getElementById("follow");
    const userName = document.getElementById("username-header").innerHTML;
    follow.disabled = true;
    e.preventDefault();
    make_req("POST", `follow/`, {
      user: userName,
    }, (result) => {
      if (result == "followed") {
        follow.innerHTML = "Following";
        document.getElementById("followers").innerHTML = parseInt(document.getElementById("followers").innerHTML) + 1 + " Followers";
      }
      else if (result == "unfollow") {
        follow.innerHTML = "Follow";
        document.getElementById("followers").innerHTML = parseInt(document.getElementById("followers").innerHTML) - 1 + " Followers";
      }
      follow.disabled = false;
    });
  });
</script>